<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Xem SVG - {{ display_name }}</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon-16x16.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="48x48" href="{{ url_for('static', filename='favicon-48x48.png') }}">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='apple-touch-icon.png') }}">
    <link rel="icon" type="image/png" sizes="192x192" href="{{ url_for('static', filename='android-chrome-192x192.png') }}">
    <link rel="icon" type="image/png" sizes="512x512" href="{{ url_for('static', filename='android-chrome-512x512.png') }}">
    <link rel="shortcut icon" type="image/png" href="{{ url_for('static', filename='favicon-32x32.png') }}">
    <meta property="og:title" content="TikZ to SVG - {{ display_name }}" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="{{ request.host_url.rstrip('/') ~ png_url }}" />
    <meta property="og:url" content="{{ request.host_url.rstrip('/') ~ url_for('view_svg', filename=filename) }}" />
    <meta property="og:description" content="Xem v√† chia s·∫ª h√¨nh TikZ SVG tr·ª±c tuy·∫øn." />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Highlight.js CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">
    <!-- Font Awesome CSS (keep one) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    
    <!-- Navigation CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/navigation.css', v='1.0') }}">
    <!-- View SVG Page CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/view_svg.css', v='1.0') }}">
    <!-- Login Modal CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/login_modal.css', v='1.0') }}">
</head>
<body data-is-logged-in="{% if user_email %}true{% else %}false{% endif %}" data-set-next-url="{{ url_for('set_next_url') }}">
  {% include 'partials/_navbar.html' %}
    <div class="container">
        <h2>{{ display_name }}</h2>
        <div id="view-mode-row">
            <div class="view-col">
                <div id="view-svg-preview">
                    <img id="view-svg-img" src="{{ svg_url }}" alt="Xem tr∆∞·ªõc h√¨nh ·∫£nh SVG - {{ display_name }}" aria-describedby="svg-description">
                </div>
                <div id="view-svg-actions">
                    <button id="view-copy-link-btn" class="view-action-btn" aria-label="Sao ch√©p li√™n k·∫øt ƒë·∫øn file SVG n√†y">üîó Copy Link</button>
                    <button id="view-download-svg-btn" class="view-action-btn view-download-btn" aria-label="T·∫£i xu·ªëng file SVG">üì• T·∫£i xu·ªëng SVG</button>
                </div>
            </div>
            <div class="view-col">
                <div class="actions-header">
                    <h4 class="actions-title">C√°c thao t√°c</h4>
                    <div class="actions-list">
                        <button id="view-back-to-edit-btn" aria-label="Quay v·ªÅ trang ch·ªânh s·ª≠a code TikZ">‚Ü©Ô∏è Quay v·ªÅ ch·ªânh s·ª≠a code TikZ</button>
                    </div>
                </div>
                <div id="view-export-section">
                    <div class="export-section">
                        <h4>Xu·∫•t ·∫£nh PNG/JPEG</h4>
                        <form id="view-export-form" class="export-form">
                            <div class="export-pair">
                                <label for="view-export-format" class="export-label">ƒê·ªãnh d·∫°ng:</label>
                                <select id="view-export-format" class="export-input export-select">
                                    <option value="png">PNG</option>
                                    <option value="jpeg">JPEG</option>
                                </select>
                            </div>
                            <div class="export-pair">
                                <label for="view-export-dpi" class="export-label">DPI:</label>
                                <input type="number" id="view-export-dpi" min="1" class="export-input export-number" placeholder="Auto">
                            </div>
                            <div class="export-pair">
                                <label for="view-export-width" class="export-label">Width (px):</label>
                                <input type="number" id="view-export-width" min="1" class="export-input export-number" placeholder="Auto">
                            </div>
                            <div class="export-pair">
                                <label for="view-export-height" class="export-label">Height (px):</label>
                                <input type="number" id="view-export-height" min="1" class="export-input export-number" placeholder="Auto">
                            </div>
                            <div class="export-btn-group">
                                <button id="view-export-btn" type="button" class="export-btn" aria-label="T·∫£i xu·ªëng file ·∫£nh PNG ho·∫∑c JPEG">T·∫£i xu·ªëng</button>
                            </div>
                        </form>
                        <div id="view-export-msg" class="export-msg"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    {# Logout modal removed; navbar already provides it #}

    {% include 'partials/_login_modal.html' %}

    <!-- Inject TikZ code as JSON to avoid inline Jinja inside JS -->
    <script id="tikz-code-json" type="application/json">{{ tikz_code|default("")|tojson|safe }}</script>
    <!-- View SVG Page JS -->
    <script src="{{ url_for('static', filename='js/view_svg.js', v='1.0') }}"></script>
    
    <!-- highlight.js is initialized within view_svg.js if present -->
    
    <footer class='page-footer'>¬© 2024 TikZ2SVG - All rights reserved.</footer>
</body>
</html> 