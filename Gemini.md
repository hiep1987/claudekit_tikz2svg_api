# Gemini.md

T·ªáp n√†y cung c·∫•p h∆∞·ªõng d·∫´n cho c√°c AI assistant c·ªßa Google (nh∆∞ Gemini) khi h·ªó tr·ª£ ph√°t tri·ªÉn d·ª± √°n `tikz2svg_api` trong repository n√†y.

---

## üìù T·ªïng quan d·ª± √°n

**T√™n d·ª± √°n:** tikz2svg_api
**M·ª•c ti√™u:** Cung c·∫•p m·ªôt ·ª©ng d·ª•ng web cho ph√©p ng∆∞·ªùi d√πng chuy·ªÉn ƒë·ªïi m√£ TikZ th√†nh SVG, qu·∫£n l√Ω t√†i kho·∫£n, chia s·∫ª v√† t∆∞∆°ng t√°c v·ªõi c√°c file SVG.

**Th√†nh ph·∫ßn ch√≠nh:**
- **Backend:** Flask (Python) + MySQL + Gunicorn
- **Frontend:** HTML/CSS/JavaScript (Server-side rendering v·ªõi Jinja2)
- **X√°c th·ª±c:** Google OAuth2 + Flask-Login
- **Email:** Flask-Mail v·ªõi SMTP (Zoho)
- **X·ª≠ l√Ω file:** CairoSVG, Pillow, v√† m·ªôt h·ªá th·ªëng ph√¢n t√≠ch LaTeX ƒë·ªÉ bi√™n d·ªãch.
- **Tri·ªÉn khai:** M√¥i tr∆∞·ªùng Production v·ªõi rate limiting, logging, v√† c√°c bi·ªán ph√°p b·∫£o m·∫≠t.

---

## üõ†Ô∏è Ki·∫øn tr√∫c

### Backend
- **Framework:** Flask
- **Database:** MySQL (s·ª≠ d·ª•ng `mysql-connector-python`)
- **Authentication:** Google OAuth2 t√≠ch h·ª£p qua Flask-Dance v√† Flask-Login.
- **File Processing:** H·ªá th·ªëng bi√™n d·ªãch `lualatex` ƒë·ªÉ x·ª≠ l√Ω TikZ, sau ƒë√≥ d√πng `cairosvg` ƒë·ªÉ chuy·ªÉn ƒë·ªïi PDF sang SVG. C√≥ c∆° ch·∫ø t·ª± ƒë·ªông ph√°t hi·ªán v√† ch√®n c√°c g√≥i LaTeX c·∫ßn thi·∫øt.
- **Email Service:** T√≠ch h·ª£p `Flask-Mail` ƒë·ªÉ g·ª≠i email giao d·ªãch.
- **Rate Limiting:** T√≠ch h·ª£p s·∫µn c∆° ch·∫ø rate limit cho c√°c t√°c v·ª• t·ªën t√†i nguy√™n nh∆∞ g·ª≠i email.

### Frontend
- **Template Engine:** Jinja2
- **CSS:** CSS t√πy ch·ªânh, c√≥ c·∫•u tr√∫c component-based v√† responsive.
- **JavaScript:** Vanilla JS (ES6+) ƒë·ªÉ x·ª≠ l√Ω c√°c t∆∞∆°ng t√°c ph√≠a client, bao g·ªìm AJAX ƒë·ªÉ g·ªçi API backend.
- **UI Components:** S·ª≠ d·ª•ng c√°c th∆∞ vi·ªán nh∆∞ CodeMirror (cho editor), Quill.js (cho bio), v√† Cropper.js (cho avatar).

### C·∫•u tr√∫c file
```
tikz2svg_api/
‚îú‚îÄ‚îÄ app.py                 # ·ª®ng d·ª•ng Flask ch√≠nh
‚îú‚îÄ‚îÄ requirements.txt       # C√°c dependencies c·ªßa Python
‚îú‚îÄ‚îÄ static/                # C√°c file tƒ©nh (CSS, JS, ·∫£nh, avatars)
‚îú‚îÄ‚îÄ templates/             # C√°c template Jinja2
‚îÇ   ‚îú‚îÄ‚îÄ partials/          # C√°c component t√°i s·ª≠ d·ª•ng (_navbar.html, _file_card.html)
‚îÇ   ‚îî‚îÄ‚îÄ emails/            # C√°c template email
‚îú‚îÄ‚îÄ email_service.py       # Logic g·ª≠i email
‚îú‚îÄ‚îÄ verification_service.py# Logic x√°c th·ª±c
‚îî‚îÄ‚îÄ *.md                   # C√°c file t√†i li·ªáu c·ªßa d·ª± √°n
```

---

## üîë H∆∞·ªõng d·∫´n cho Gemini

Khi h·ªó tr·ª£ d·ª± √°n n√†y, Gemini c·∫ßn tu√¢n th·ªß c√°c nguy√™n t·∫Øc sau:

### 1. V·ªÅ t√†i li·ªáu (Docs)
- **Lu√¥n c·∫≠p nh·∫≠t:** Khi th√™m ho·∫∑c s·ª≠a t√≠nh nƒÉng, h√£y c·∫≠p nh·∫≠t c√°c file `.md` li√™n quan.
- **T·∫°o m·ªõi:** V·ªõi c√°c t√≠nh nƒÉng l·ªõn, h√£y t·∫°o file t√†i li·ªáu m·ªõi ƒë·ªÉ m√¥ t·∫£ r√µ r√†ng.
- **Ng√¥n ng·ªØ:** S·ª≠ d·ª•ng ti·∫øng Vi·ªát cho t√†i li·ªáu ƒë·ªÉ gi·ªØ t√≠nh nh·∫•t qu√°n.
- **README:** C·∫≠p nh·∫≠t `README.md` n·∫øu c√≥ thay ƒë·ªïi quan tr·ªçng v·ªÅ ki·∫øn tr√∫c ho·∫∑c c√°ch c√†i ƒë·∫∑t.

### 2. V·ªÅ code
- **Tu√¢n th·ªß quy ∆∞·ªõc:** Gi·ªØ nguy√™n style code hi·ªán c√≥ (PEP 8 cho Python, Vanilla JS ES6 cho frontend).
- **B·∫£o m·∫≠t l√† tr√™n h·∫øt:**
    - Lu√¥n s·ª≠ d·ª•ng parameterized queries ƒë·ªÉ tr√°nh SQL Injection.
    - Validate v√† sanitize m·ªçi d·ªØ li·ªáu ƒë·∫ßu v√†o t·ª´ ng∆∞·ªùi d√πng.
    - Kh√¥ng bao gi·ªù hardcode credentials, API keys, ho·∫∑c c√°c th√¥ng tin nh·∫°y c·∫£m. S·ª≠ d·ª•ng bi·∫øn m√¥i tr∆∞·ªùng qua `.env`.
- **X·ª≠ l√Ω l·ªói:** Implement try-except/try-catch ƒë·∫ßy ƒë·ªß, k√®m theo logging chi ti·∫øt ƒë·ªÉ d·ªÖ d√†ng debug.
- **Hi·ªáu su·∫•t:** T·ªëi ∆∞u c√°c truy v·∫•n CSDL, ch·ªâ transition c√°c thu·ªôc t√≠nh CSS c·∫ßn thi·∫øt, v√† c√¢n nh·∫Øc caching khi h·ª£p l√Ω.

### 3. V·ªÅ Testing
- **Backend:** Vi·∫øt ho·∫∑c c·∫≠p nh·∫≠t c√°c unit test cho logic backend.
- **Frontend:** Ki·ªÉm tra k·ªπ c√°c ch·ª©c nƒÉng JavaScript tr√™n nhi·ªÅu tr√¨nh duy·ªát.
- **Lu·ªìng ng∆∞·ªùi d√πng:** Test c√°c lu·ªìng ho√†n ch·ªânh (v√≠ d·ª•: ƒëƒÉng k√Ω -> x√°c th·ª±c -> t·∫°o file -> chia s·∫ª).

### 4. V·ªÅ Commit & PR
- **Conventional Commits:** S·ª≠ d·ª•ng format commit chu·∫©n:
  - `feat:` - T√≠nh nƒÉng m·ªõi
  - `fix:` - S·ª≠a l·ªói
  - `docs:` - C·∫≠p nh·∫≠t t√†i li·ªáu
  - `refactor:` - T√°i c·∫•u tr√∫c code
  - `test:` - Th√™m/s·ª≠a test
  - `chore:` - C√°c c√¥ng vi·ªác b·∫£o tr√¨ kh√°c
- **Kh√¥ng ghi danh AI:** Tuy·ªát ƒë·ªëi kh√¥ng th√™m "Generated by Gemini" hay b·∫•t k·ª≥ ghi ch√∫ n√†o t∆∞∆°ng t·ª± trong code ho·∫∑c commit message.

---

## üì¶ Quy tr√¨nh l√†m vi·ªác

1.  **Ph√°t tri·ªÉn ·ªü local:** Ch·∫°y v√† ki·ªÉm tra t√≠nh nƒÉng tr√™n m√¥i tr∆∞·ªùng DEV (Mac) v·ªõi tunnel SSH t·ªõi CSDL c·ªßa VPS.
2.  **Commit & Push:** ƒê·∫©y c√°c thay ƒë·ªïi ƒë√£ ho√†n thi·ªán l√™n repository tr√™n GitHub.
3.  **Tri·ªÉn khai:** Ch·∫°y script `deploy.sh` tr√™n VPS ƒë·ªÉ c·∫≠p nh·∫≠t m√¥i tr∆∞·ªùng PROD.
4.  **Ki·ªÉm tra:** X√°c minh l·∫°i t√≠nh nƒÉng tr√™n m√¥i tr∆∞·ªùng PROD.

---

## üìö C√°c file t√†i li·ªáu quan tr·ªçng

D·ª± √°n n√†y c√≥ h·ªá th·ªëng t√†i li·ªáu `.md` r·∫•t chi ti·∫øt. H√£y tham kh·∫£o c√°c file n√†y tr∆∞·ªõc khi th·ª±c hi·ªán thay ƒë·ªïi:
- `DATABASE_DOCUMENTATION.md`: M√¥ t·∫£ c·∫•u tr√∫c CSDL.
- `EMAIL_SETUP_GUIDE.md` & `VERIFICATION_SYSTEM_GUIDE.md`: H∆∞·ªõng d·∫´n v·ªÅ h·ªá th·ªëng email v√† x√°c th·ª±c.
- `RATE_LIMIT_GUIDE.md`: Chi ti·∫øt v·ªÅ c∆° ch·∫ø rate limiting.
- `WORKFLOW_GUIDE.md` & `DEV_QUICKSTART.md`: Quy tr√¨nh l√†m vi·ªác v√† tri·ªÉn khai.
- `README_PACKAGE_SYSTEM.md`: C√°ch ho·∫°t ƒë·ªông c·ªßa h·ªá th·ªëng qu·∫£n l√Ω g√≥i LaTeX.
